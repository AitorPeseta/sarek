- name: Run variant calling on tumor only sample with mutect2
  command: nextflow run main.nf -profile test_cache,tools_tumoronly --tools mutect2 --outdir results
  tags:
    - mutect2
    - tumor_only
    - variant_calling
  files:
    - path: results/csv/variantcalled.csv
      md5sum: d57c1beba9005e9790a573bd93398b72
    - path: results/multiqc
    - path: results/reports/bcftools/mutect2/sample2/sample2.mutect2.filtered.bcftools_stats.txt
    # conda changes md5sums for test
    - path: results/reports/vcftools/mutect2/sample2/sample2.mutect2.filtered.FILTER.summary
      md5sum: ef9bd9a2f41d8872ba25e5616e4c2a5e
    - path: results/reports/vcftools/mutect2/sample2/sample2.mutect2.filtered.TsTv.count
      md5sum: fe3ff1f0c2ead72f037552727438e00a
    - path: results/reports/vcftools/mutect2/sample2/sample2.mutect2.filtered.TsTv.qual
    # conda changes md5sums for test
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.artifactprior.tar.gz
    # binary changes md5sums on reruns
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.contamination.table
      md5sum: 46c708c943b453da89a3da08acfdb2a7
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.filtered.vcf.gz
    # binary changes md5sums on reruns
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.filtered.vcf.gz.filteringStats.tsv
      md5sum: 9a8439d0bb5875f1e673cf592af85ffb
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.filtered.vcf.gz.tbi
    # binary changes md5sums on reruns
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.pileups.table
      md5sum: 9afe42339f590937166edcf4746c22ec
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.segmentation.table
      md5sum: f4643d9319bde4efbfbe516d6fb13052
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.vcf.gz
    # binary changes md5sums on reruns
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.vcf.gz.stats
      md5sum: 3cc40a35727af6c5223fb45678f3f172
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.vcf.gz.tbi
    # binary changes md5sums on reruns
    - path: results/mutect2
      should_exist: false
- name: Run variant calling on tumor only sample with mutect2 without intervals
  command: nextflow run main.nf -profile test_cache,tools_tumoronly --tools mutect2 --no_intervals --outdir results
  tags:
    - mutect2
    - no_intervals
    - tumor_only
    - variant_calling
  files:
    - path: results/csv/variantcalled.csv
      md5sum: d57c1beba9005e9790a573bd93398b72
    - path: results/multiqc
    - path: results/no_intervals.bed
      md5sum: f3dac01ea66b95fe477446fde2d31489
    - path: results/no_intervals.bed.gz
      md5sum: f3dac01ea66b95fe477446fde2d31489
    - path: results/no_intervals.bed.gz.tbi
      md5sum: f3dac01ea66b95fe477446fde2d31489
    - path: results/reports/bcftools/mutect2/sample2/sample2.mutect2.filtered.bcftools_stats.txt
    # conda changes md5sums for test
    - path: results/reports/vcftools/mutect2/sample2/sample2.mutect2.filtered.FILTER.summary
      md5sum: 5a833fd50e6efb26d1df2336eb0caf5e
    - path: results/reports/vcftools/mutect2/sample2/sample2.mutect2.filtered.TsTv.count
      md5sum: f5295a61da80f12babae74fe4e104aad
    - path: results/reports/vcftools/mutect2/sample2/sample2.mutect2.filtered.TsTv.qual
    # conda changes md5sums for test
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.artifactprior.tar.gz
    # binary changes md5sums on reruns
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.contamination.table
      md5sum: 46c708c943b453da89a3da08acfdb2a7
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.filtered.vcf.gz
    # binary changes md5sums on reruns
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.filtered.vcf.gz.filteringStats.tsv
      md5sum: e4eac0c602dd25aa61a6dc26a2b61844
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.filtered.vcf.gz.tbi
    # binary changes md5sums on reruns
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.pileups.table
      md5sum: fe35b6bc041f2df8bd1f23420af3ddf9
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.segmentation.table
      md5sum: f4643d9319bde4efbfbe516d6fb13052
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.vcf.gz
    # binary changes md5sums on reruns
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.vcf.gz.stats
      md5sum: 55ed641e16089afb33cdbc478e202d3d
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.vcf.gz.tbi
    # binary changes md5sums on reruns
    - path: results/mutect2
      should_exist: false
- name: Run joint calling on somatic samples with mutect2
  command: nextflow run main.nf -profile test_cache,tools_somatic --input tests/csv/3.0/recalibrated_somatic_joint.csv --tools mutect2 --joint_mutect2 --outdir results
  tags:
    - mutect2
    - somatic
    - variant_calling
    - multi_sample
    - joint_somatic
  files:
    - path: results/csv/variantcalled.csv
      md5sum: 7aa65d5d625ce77cd8cabd58162bd71a
    - path: results/multiqc
    - path: results/reports/bcftools/mutect2/test/test.mutect2.filtered.bcftools_stats.txt
      md5sum: d75da410d57960944f54d02b2b5cdcac
    - path: results/reports/vcftools/mutect2/test/test.mutect2.filtered.FILTER.summary
      md5sum: e0eb3e34fc15f3b452bfc43f032cc8be
    - path: results/reports/vcftools/mutect2/test/test.mutect2.filtered.TsTv.count
      md5sum: aa51bde6080c015c6aa6c8254977dd11
    - path: results/reports/vcftools/mutect2/test/test.mutect2.filtered.TsTv.qual
      md5sum: 262f843f68d072c457ca28b56da3ede8
    - path: results/variant_calling/mutect2/sample1/sample1.mutect2.pileups.table
      md5sum: 16077fdb885a8afe64c7669477471354
    - path: results/variant_calling/mutect2/sample2/sample2.mutect2.pileups.table
      md5sum: 9afe42339f590937166edcf4746c22ec
    - path: results/variant_calling/mutect2/sample3/sample3.mutect2.pileups.table
      md5sum: fd0c1f7819717b7f94e52f6611f4b2e0
    - path: results/variant_calling/mutect2/test/sample2_vs_sample1.mutect2.contamination.table
      md5sum: 46c708c943b453da89a3da08acfdb2a7
    - path: results/variant_calling/mutect2/test/sample3_vs_sample1.mutect2.contamination.table
      md5sum: 11440fe64b5b953d7efb9cf47e330364
    - path: results/variant_calling/mutect2/test/sample2_vs_sample1.mutect2.segmentation.table
      md5sum: f4643d9319bde4efbfbe516d6fb13052
    - path: results/variant_calling/mutect2/test/sample3_vs_sample1.mutect2.segmentation.table
      md5sum: 38f83e2f98b206640644dd93d5e96f4e
    - path: results/variant_calling/mutect2/test/test.mutect2.artifactprior.tar.gz
    # binary changes md5sums on reruns
    - path: results/variant_calling/mutect2/test/test.mutect2.filtered.vcf.gz
    # binary changes md5sums on reruns
    - path: results/variant_calling/mutect2/test/test.mutect2.filtered.vcf.gz.filteringStats.tsv
      md5sum: dee72b4c5c9bbda01d44fd3e00f1b404
    - path: results/variant_calling/mutect2/test/test.mutect2.filtered.vcf.gz.tbi
    # binary changes md5sums on reruns
    - path: results/variant_calling/mutect2/test/test.mutect2.vcf.gz
    # binary changes md5sums on reruns
    - path: results/variant_calling/mutect2/test/test.mutect2.vcf.gz.stats
      md5sum: 094cb75b0bda28e92b6718ff33d136e2
    - path: results/variant_calling/mutect2/test/test.mutect2.vcf.gz.tbi
    # binary changes md5sums on reruns
